View(neighbs)
source("~/R/simulating-ftc-movement/code/model.R")
View(neighbs)
source("~/R/simulating-ftc-movement/code/model.R")
View(landscape)
source("~/R/simulating-ftc-movement/code/model.R")
timesteps <- 2
# load landscape
landscape <- load_landscape(
"images/blobs.png",
scale = 0.5, # Set scale <1 to shrink image
cellsize = 80 # set cellsize <8 to make a finer hex grid overlay
)
source("code/mapping.R")
source("code/model.R")
timesteps <- 2
# load landscape
landscape <- load_landscape(
"images/blobs.png",
scale = 0.5, # Set scale <1 to shrink image
cellsize = 80 # set cellsize <8 to make a finer hex grid overlay
)
landscape <- basic_habitat_quality( # set habitat quality threshold
landscape,
threshold = 0.5
)
# Compute neighbours
neighbs <- compute_neighbors(landscape, max_host_dispersal = 1)
View(neighbs)
# Compute neighbour distances
dists <- compute_neighbor_distances(neighbs)
View(dists)
View(neighbs)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_neighbor_distances(neighbs)
# Compute neighbour distances
dists <- compute_neighbor_distances(neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_neighbor_distances(neighbs, max_host_dispersal = 1)
View(neighbs)
seq_along(neighbs)
source("~/R/simulating-ftc-movement/code/model.R")
source("~/R/simulating-ftc-movement/code/model.R")
source("code/mapping.R")
source("code/model.R")
timesteps <- 2
# load landscape
landscape <- load_landscape(
"images/blobs.png",
scale = 0.5, # Set scale <1 to shrink image
cellsize = 80 # set cellsize <8 to make a finer hex grid overlay
)
landscape <- basic_habitat_quality( # set habitat quality threshold
landscape,
threshold = 0.5
)
# Compute neighbours
neighbs <- compute_neighbors(landscape, max_host_dispersal = 1)
# Compute neighbour distances
dists <- compute_neighbor_distances(neighbs, max_host_dispersal = 1)
# Compute neighbour distances
dists <- compute_neighbor_distances(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_neighbor_distances(landscape, neighbs, max_host_dispersal = 1)
View(dists)
source("~/R/simulating-ftc-movement/code/model.R")
source("~/R/simulating-ftc-movement/code/model.R")
{
timesteps <- 2
# load landscape
landscape <- load_landscape(
"images/blobs.png",
scale = 0.5, # Set scale <1 to shrink image
cellsize = 80 # set cellsize <8 to make a finer hex grid overlay
)
landscape <- basic_habitat_quality( # set habitat quality threshold
landscape,
threshold = 0.5
)
# Compute neighbours
neighbs <- compute_neighbors(landscape, max_host_dispersal = 1)
# Compute neighbour distances
dists <- compute_neighbor_distances(
landscape, neighbs, max_host_dispersal = 1)
# Generate sparse distance matrix
D <- compute_sparse_distance(landscape, max_host_dispersal = 1)
# Generate dispersal kernel
K <- initialize_dispersal(
D,
stay_prob = 0.5,
scale = 1,
kernel_function = "negative_exp"
)
# Initialize density
H <- matrix(NA_real_, nrow = nrow(landscape), ncol = timesteps)
H[,1] <- c(0,0,0,1,0,0,0,0,0) # initial host population in cell 4
# Disperse once
H[,2] <- disperse(
kernel = K,
density = H[,1],
survival = 1
)
visualise_landscape(landscape, density = H[,2])
}
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
View(dists)
head(dists)
view(dists)
View(dists)
dists
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
dists
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
dists
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
dists
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
dists
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
?ifelse
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
View(landscape)
View(coords)
coords[,1])
coords[,1]
max(coords[,1])
View(coords)
min(coords[,1])
max(coords[,1]) - min(coords[,1]) + centroid_dist
grid_width
source("~/R/simulating-ftc-movement/code/model.R")
source("code/mapping.R")
source("code/model.R")
{
timesteps <- 2
# load landscape
landscape <- load_landscape(
"images/blobs.png",
scale = 0.5, # Set scale <1 to shrink image
cellsize = 80 # set cellsize <8 to make a finer hex grid overlay
)
landscape <- basic_habitat_quality( # set habitat quality threshold
landscape,
threshold = 0.5
)
# Compute neighbours
neighbs <- compute_neighbors(landscape, max_host_dispersal = 1)
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
# Generate sparse distance matrix
D <- compute_sparse_distance(landscape, max_host_dispersal = 1)
# Generate dispersal kernel
K <- initialize_dispersal(
D,
stay_prob = 0.5,
scale = 1,
kernel_function = "negative_exp"
)
# Initialize density
H <- matrix(NA_real_, nrow = nrow(landscape), ncol = timesteps)
H[,1] <- c(0,0,0,1,0,0,0,0,0) # initial host population in cell 4
# Disperse once
H[,2] <- disperse(
kernel = K,
density = H[,1],
survival = 1
)
visualise_landscape(landscape, density = H[,2])
}
source("~/R/simulating-ftc-movement/code/model.R")
source("code/mapping.R")
source("code/model.R")
{
timesteps <- 2
# load landscape
landscape <- load_landscape(
"images/blobs.png",
scale = 0.5, # Set scale <1 to shrink image
cellsize = 80 # set cellsize <8 to make a finer hex grid overlay
)
landscape <- basic_habitat_quality( # set habitat quality threshold
landscape,
threshold = 0.5
)
# Compute neighbours
neighbs <- compute_neighbors(landscape, max_host_dispersal = 1)
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
# Generate sparse distance matrix
D <- compute_sparse_distance(landscape, max_host_dispersal = 1)
# Generate dispersal kernel
K <- initialize_dispersal(
D,
stay_prob = 0.5,
scale = 1,
kernel_function = "negative_exp"
)
# Initialize density
H <- matrix(NA_real_, nrow = nrow(landscape), ncol = timesteps)
H[,1] <- c(0,0,0,1,0,0,0,0,0) # initial host population in cell 4
# Disperse once
H[,2] <- disperse(
kernel = K,
density = H[,1],
survival = 1
)
visualise_landscape(landscape, density = H[,2])
}
#   row_sums <- rowSums(K)
source("~/R/simulating-ftc-movement/code/model.R")
source("code/mapping.R")
source("code/model.R")
{
timesteps <- 2
# load landscape
landscape <- load_landscape(
"images/blobs.png",
scale = 0.5, # Set scale <1 to shrink image
cellsize = 80 # set cellsize <8 to make a finer hex grid overlay
)
landscape <- basic_habitat_quality( # set habitat quality threshold
landscape,
threshold = 0.5
)
# Compute neighbours
neighbs <- compute_neighbors(landscape, max_host_dispersal = 1)
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
# Generate sparse distance matrix
D <- compute_sparse_distance(landscape, max_host_dispersal = 1)
# Generate dispersal kernel
K <- initialize_dispersal(
D,
stay_prob = 0.5,
scale = 1,
kernel_function = "negative_exp"
)
# Initialize density
H <- matrix(NA_real_, nrow = nrow(landscape), ncol = timesteps)
H[,1] <- c(0,0,0,1,0,0,0,0,0) # initial host population in cell 4
# Disperse once
H[,2] <- disperse(
kernel = K,
density = H[,1],
survival = 1
)
visualise_landscape(landscape, density = H[,2])
}
#   row_sums <- rowSums(K)
source("~/R/simulating-ftc-movement/code/model.R")
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
grid_width/2
d <= grid_width/2
source("~/R/simulating-ftc-movement/code/model.R")
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs)
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
View(ghost_coords)
View(ghost_coords)
View(ghost_coords)
ghost_coords[,1]
coords[i,1]
coords[i,1]
ghost_coords[,1]
neighbors[wrapped_mask]
coords[ghost_neighbors, , drop = FALSE]
coords[i,1]
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
View(ghost_coords)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
View(ghost_coords)
?drop
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
View(wrapped_coords)
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
View(wrapped_coords)
coords[i,1]
wrapped_coords[,1]
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
coords[i,1]
wrapped_coords[,1]
abs(wrapped_coords[,1])
abs(wrapped_coords[,1]
wrapped_coords[,1]
wrapped_coords[,1]
coords[i,1] - abs(wrapped_coords[,1])
wrapped_coords[,1] - grid_width - centroid_dist
wrapped_coords[,1] - grid_width - centroid_dist
centroid_dist
grid_width
wrapped_coords[,1] - grid_width + centroid_dist
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
View(wrapped_coords)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
View(wrapped_coords)
grid_width
max(coords[,1])
coords[1,]
coords[,1]
View(coords)
min(coords[,1])
min(coords[,2])
max(coords[,1])
coords[,2]
View(coords)
coords[1, 2]
coords[1, 2]
coords[coords[,2] == y_coord_row1, 1]
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
coords[1, 2]
coords[coords[,2] == y_coord_row1, 1]
source("~/R/simulating-ftc-movement/code/model.R")
source("~/R/simulating-ftc-movement/code/model.R")
source("~/R/simulating-ftc-movement/code/model.R")
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
st_distance(centroids[1, ], centroids[2, ])
centroids[1, ]
centroids[2, ]
min(as.numeric(dist(coords)))
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
integer(nonzeros)
nonzeros
max_host_dispersal
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
View(shifted_coords)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
View(coords)
d
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
shifted_coords[,2]
wrapped_coords
shifted_coords
wrapped_coords[,1]
wrapped_coords
wrapped_coords[,1]
centroid_row_width
shifted_coords[,1]
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
wrapped_coords[,1] - (centroid_row_width + centroid_dist)
shifted_coords
View(coords)
wrapped_coords
wrapped_coords
wrapped_coords[,1]
centroid_row_width
centroid_row_width + centroid_dist
wrapped_coords[,1]
coords[i,1]
abs(shifted_coords[,1])
shifted_coords[,2]
coords[i,2]
dx_wrapshifted
abs(shifted_coords[,1])
coords[i,1]
coords
shifted_coords
coords[i,1]
abs(shifted_coords[,1])
shifted_coords[,1]
coords[i,1]
shifted_coords[,1]
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
wrapped_coords
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
shifted_coords
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
Q
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
vals
wrapped_neighbors
shifted_coords
wrapped_coords
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
wrapped_coords
wrapped_coords[,1]
wrapped_coords
wrapped_coords[1,]
wrapped_coords[,1]
wrapped_coords[1]
wrapped_coords[2]
as.data.frame(wrapped_coords[,1])
as.matrix(wrapped_coords[,1])
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
View(wrapped_coords)
wrapped_coords[,1]
str(wrapped_coords)
str(wrapped_coords)
as.list(wrapped_coords[,1])
coords[wrapped_neighbors, ]
View(coords)
str(coords[wrapped_neighbors,])
as.list(coords[wrapped_neighbors,])
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
dists
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
wrapped_coords[,1] - coords[i,1]
wrapped_coords[,1]
wrapped_coords[,1]-sign(wrapped_coords[,1] - coords[i,1])*(centroid_row_width+centroid_dist)
source("~/R/simulating-ftc-movement/code/model.R")
source("~/R/simulating-ftc-movement/code/model.R")
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 1)
View(dists)
dists
# Compute neighbours
neighbs <- compute_neighbors(landscape, max_host_dispersal = 2)
# Compute neighbour distances
dists <- compute_sparse_distance(landscape, neighbs, max_host_dispersal = 2)
dists
